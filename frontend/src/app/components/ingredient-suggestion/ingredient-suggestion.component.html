<div *ngIf="!showSuggestions">

  <h2>Select Ingredients</h2>

  <!-- Search -->
  <div class="search-container">
    <input
      type="text"
      placeholder="Search ingredients..."
      [(ngModel)]="searchTerm"
      (input)="onSearch()"
    />
  </div>

  <!-- Selected Bar -->
  <div class="selected-bar" *ngIf="selectedIngredients.length">
    <div class="selected-list">
      <span
        class="selected-chip"
        *ngFor="let ing of selectedIngredients"
        (click)="toggleSelectionByName(ing)"
      >
        {{ ing }} ✕
      </span>
    </div>

    <button class="suggest-btn top-btn" (click)="suggestRecipes()">
      Suggest Recipes
    </button>
  </div>

  <!-- Ingredients Grid -->
  <div class="recipe-grid">
    <div
      class="recipe-card"
      *ngFor="let ingredient of filteredIngredients"
      [class.selected]="selectedIngredients.includes(ingredient.name)"
      (click)="toggleSelectionByName(ingredient.name)"
    >
      <img
        [src]="ingredient.imageUrl.startsWith('http') ? ingredient.imageUrl : 'http://localhost:8080/images/' + ingredient.imageUrl"
        alt="{{ ingredient.name }}"
      />
      <h3>{{ ingredient.name }}</h3>
      <input
        type="checkbox"
        [checked]="selectedIngredients.includes(ingredient.name)"
        (click)="$event.stopPropagation(); toggleSelectionByName(ingredient.name)"
      />
    </div>
  </div>

</div>

<!-- Suggested Recipes -->
<div *ngIf="showSuggestions">

  <h2>Suggested Recipes</h2>

  <!-- No recipes found -->
  <p class="no-result" *ngIf="!suggestedRecipes.length">
    No recipes found with the selected ingredients.
    Try selecting more ingredients.
  </p>

  <!-- Recipes -->
  <div class="recipe-grid" *ngIf="suggestedRecipes.length">
    <div
      class="recipe-card"
      *ngFor="let recipe of suggestedRecipes"
      (click)="viewDetails(recipe)"
    >
      <img
        [src]="recipe.imageUrl.startsWith('http') ? recipe.imageUrl : 'http://localhost:8080/images/' + recipe.imageUrl"
        alt="{{ recipe.name }}"
      />
      <h3>{{ recipe.name }}</h3>
      <p>Prep Time: {{ recipe.prepTime }} mins</p>
    </div>
  </div>

  <!-- Back Button -->
  <button class="back-btn" (click)="goBackToSelection()">
    ← Modify Ingredients
  </button>

</div>

