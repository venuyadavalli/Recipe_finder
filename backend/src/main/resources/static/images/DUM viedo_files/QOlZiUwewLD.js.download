;/*FB_PKG_DELIM*/

__d("WAWebArchivedDrawer.react",["fbt","WALogger","WAWebApiChat","WAWebChat.react","WAWebChatCollection","WAWebChatCommunityUtils","WAWebCmd","WAWebCommunityGatingUtils","WAWebComposeBoxActions","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEmptyState.react","WAWebFlatList.react","WAWebFlatListController","WAWebFocusTracer","WAWebFrontendChatGetters","WAWebKeyboardHotKeys.react","WAWebSettingsGetters","WAWebSingleSelection","WAWebText.react","WAWebUIRefreshGatingUtils","WAWebUISpacing","react","stylex","useLazyRef","useWAWebListener","useWAWebSettingsValues"],(function(a,b,c,d,e,f,g,h){var i,j=["ref"],k,l,m;b=m||d("react");var n=k||(k=c("react")),o=b.useEffect,p=b.useRef,q=b.useState,r=d("WAWebChat.react").ChatFactory(),s=d("WAWebFlatList.react").FlatListFactory();function a(a){var b=a.ref;a=babelHelpers.objectWithoutPropertiesLoose(a,j);var e=a.onClose,f=function(){return d("WAWebChatCollection").ChatCollection.filter(function(a){return a.archive&&d("WAWebFrontendChatGetters").getShouldAppearInList(a)})};a=d("useWAWebSettingsValues").useSettingsValues([d("WAWebSettingsGetters").getShowArchiveV2,d("WAWebSettingsGetters").getArchive]);var g=a[0],k=a[1];a=c("useLazyRef")(function(){return new(c("WAWebFlatListController"))()});var m=c("useLazyRef")(function(){return new(c("WAWebSingleSelection"))([],function(a){return a.id.toString()})}),t=p(null),u=q(f),v=u[0],w=u[1];u=function(a){var b=m.current.getVal();a===b&&m.current.unset()};var x=function(){return g};d("useWAWebListener").useListener(d("WAWebChatCollection").ChatCollection,[x()?"sort":null,"change:archive","add","remove"].filter(Boolean),function(){w(f())});var y=function(a){m.current.setVal(a,!1)};d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"close_chat",u);d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"update_chatlist_selection",y);u=function(){var a=d("WAWebChatCollection").ChatCollection.some(function(a){return a.archive});return a};var z=function(){return d("WAWebChatCollection").ChatCollection.toArray().find(function(a){return a.active&&a.archive})};o(function(){if(x()){var a=f(),b=new Map();a.forEach(function(a){a.archiveAtMentionViewedInDrawer=!0,b.set(a.id.toString(),!0)});d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["WAWebArchivedDrawer: will mark chats for archive"])));d("WAWebApiChat").updateChatArchiveDrawer(b)}t.current&&c("WAWebFocusTracer").focus(t.current);a=z();a&&y(a)},[]);var A=function(){e()},B=function(a,b){d("WAWebCmd").Cmd.openChatFromUnread(b).then(function(a){a&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(b)}),k.enabled||A()},C=function(a){a.preventDefault(),a.stopPropagation(),m.current.setNext(!0)},D=function(a){a.preventDefault(),a.stopPropagation(),m.current.setPrev(!0)},E=function(a){a=d("WAWebCommunityGatingUtils").shouldShowNewSubgroupIdentity(a.groupMetadata)?d("WAWebChatCommunityUtils").SUBGROUP_V2_CHAT_CELL_HEIGHT:d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT;return d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?a+4:a},F=function(){return v.map(function(a){return{itemKey:a.id.toString(),chat:a,height:E(a)}})};m.current.init(v,!0);var G;if(u()){u=h._(/*BTDS*/"These chats stay archived when new messages are received. To change this experience, go to {=m2} on your phone.",[h._implicitParam("=m2",n.jsx("span",{className:"x117nqv4",children:h._(/*BTDS*/"Settings > Chats")}))]);var H=h._(/*BTDS*/"These chats are unarchived when new messages are received. To change this experience, go to {=m2} on your phone.",[h._implicitParam("=m2",n.jsx("span",{className:"x117nqv4",children:h._(/*BTDS*/"Settings > Chats")}))]);G=n.jsx("div",{className:"x1xnncb0",children:n.jsx("div",babelHelpers["extends"]({},(l||(l=c("stylex"))).props([d("WAWebUISpacing").uiPadding.horiz20,d("WAWebUISpacing").uiPadding.bottom10]),{children:n.jsx("div",{className:"x1yc453h",children:n.jsx(d("WAWebText.react").WAWebTextMuted,{as:"p",children:g?u:H})})}))})}if(v.length>0){u={down:C,up:D};H=n.jsxs(d("WAWebKeyboardHotKeys.react").HotKeys,{ref:t,handlers:u,children:[G,n.jsx("div",{className:"x889kno x1xnnf8n x1a8lsjc x106a9eq",children:n.jsx("div",{className:"xjm9jq1 xkh2ocl x1uew315"})}),n.jsx(s,{className_DONOTUSE:"x6ikm8r x10wlt62",data:F(),testid:void 0,flatListController:a.current,direction:"vertical",renderItem:function(a){return n.jsx(r,{chat:a.chat,mode:d("WAWebChat.react").Mode.LAST,active:m.current,onClick:B,hideArchivedIcon:k.enabled,hideMuteIcon:x(),hideMuteOption:x(),ephemeralIcon:"chat-list",showCommunityInfo:!0})}})]})}else H=n.jsx(d("WAWebEmptyState.react").Archived,{});C=k.enabled?h._(/*BTDS*/"Archived"):h._(/*BTDS*/"Archived chats");D=d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL;d("WAWebUIRefreshGatingUtils").sideNavSecondarySectionEnabled()&&(D=d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.TAB);return n.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"archived",tsNavigationData:{surface:"archived-chats-drawer"},children:[n.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:C,onBack:A,type:D,menu:null}),n.jsx(c("WAWebDrawerBody.react"),{flatListControllers:[a.current],children:H})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebArchivedFlow.react",["$InternalEnum","WAWebArchivedDrawer.react","WAWebSettingsModel","react","useWAWebFlow"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=b("$InternalEnum").Mirrored(["Chats"]);function a(a){a=a.onEnd;a=d("useWAWebFlow").useFlow(j.Chats,{transitions:d("useWAWebFlow").FlowTransitions.DrawerRight,onEnd:a});var b=a[0],e=a[1];if(e.step==null)return null;var f;switch(e.step){case j.Chats:f=i.jsx(c("WAWebArchivedDrawer.react"),{settings:c("WAWebSettingsModel"),onClose:function(){e.pop()}});break}return i.jsx(b,{flow:e,children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebDebugContactManagement",["err"],(function(a,b,c,d,e,f,g){var h={delaySaveMs:0,simulateErrorOnSaveOrDeleteContact:null};function a(a){a===void 0&&(a=1e4),h.delaySaveMs=Math.max(a,0)}function b(a){a=a==null?void 0:a.toUpperCase();if(a!=="USYNC"&&a!=="NETWORK"&&a!=="CLIENT")throw c("err")("Unsupported error type");h.simulateErrorOnSaveOrDeleteContact=a}d={delaySaveContactAction:a,simulateErrorOnSaveOrDeleteContact:b,debugConfigs:h};g["default"]=d}),98);